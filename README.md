# RecallGuard - 撤回守卫

一个为 AstrBot 设计的轻量级插件，旨在捕获并转发指定用户撤回的图片，确保每一个精彩瞬间都不会丢失。

## ✨ 主要功能

- **精准监控**: 您可以指定一个或多个用户的QQ号，插件将只对这些用户生效。
- **即时捕获**: 自动缓存被监控用户发送的图片，为转发做准备。
- **撤回转发**: 一旦检测到用户撤回图片，插件会立即将该图片转发到一个或多个预设的群聊或私聊中。
- **消息定制**: 转发时附带的提示语完全支持自定义，并可通过占位符 `{user_name}` 和 `{user_id}` 显示撤回者的信息。
- **自动清理**: 内置的定时任务会自动清理过期的图片缓存，避免长期占用服务器磁盘空间。

## ⚙️ 配置

1.  **配置插件**:
    * 在 AstrBot WebUI 中，进入“插件管理”，找到并**启用** `RecallGuard` 插件。
    * 点击插件右侧的“管理”按钮，进入配置页面。
    * **填写配置项**:
        * **要监听的用户QQ号列表**: 添加您希望监控的QQ账号。
        * **图片撤回后要转发到的目标会话ID列表**: 添加用于接收撤回图片的群聊或私聊会话ID。
            > **提示**: 会话ID格式为 `平台:类型:ID` (例如: `aiocqhttp:group:123456789`)。您可以在 AstrBot 的日志中找到。
        * **转发图片时附带的提示文字**: 您可以使用默认的提示，也可以根据喜好进行修改。
    * 点击页面底部的“保存配置”按钮。

## ⚠️ Docker 用户重要说明

当 AstrBot 和 QQ 协议端（如 NapCat）都通过 Docker 部署时，由于容器间的文件系统是隔离的，本插件无法直接访问协议端保存的图片文件，会导致运行失败。

**解决方案**是通过 Docker 的**共享数据卷**，将宿主机上的**同一个目录**映射到两个容器内。

**参考示例**
### 更改路径指南.txt中



